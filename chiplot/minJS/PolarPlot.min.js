import{MainPlot}from"/chiplot/minJS/mainplot.min.js";class PolarPlot extends MainPlot{constructor(){super("data file"),this.figureData.xAxis={"Text style":{id:"xAxis-tick-text","font-size":{type:"seq",value:14,isSvgAttr:!0,scaleStep:1,min:0,max:1/0},fill:{type:"color",value:"#000000",isSvgAttr:!0},"font-weight":{type:"opt",optionList:["normal","bold"],value:0,isSvgAttr:!0},"text-anchor":{type:"opt",optionList:["start","middle","end"],value:1,isSvgAttr:!0},"font-style":{type:"opt",optionList:["normal","italic"],value:0,isSvgAttr:!0},y:{type:"seq",value:20,isSvgAttr:!1,scaleStep:1,min:-1/0,max:1/0}},Grid:{id:"xAxis-grid-line",switch:{type:"check",value:!1,isFresh:!0},stroke:{type:"color",value:"#000000",isSvgAttr:!0},"stroke-width":{type:"seq",value:1,isSvgAttr:!0,scaleStep:1,min:0,max:1/0},"stroke-opacity":{type:"seq",value:.1,isSvgAttr:!0,scaleStep:.01,min:0,max:1}}},this.figureData.yAxis={"Text style":{id:"yAxis-tick-text",rotate:{type:"seq",value:0,isSvgAttr:!1,scaleStep:1,min:0,max:360},"font-size":{type:"seq",value:14,isSvgAttr:!0,scaleStep:1,min:0,max:1/0},fill:{type:"color",value:"#000000",isSvgAttr:!0},"font-weight":{type:"opt",optionList:["normal","bold"],value:0,isSvgAttr:!0},"text-anchor":{type:"opt",optionList:["start","middle","end"],value:1,isSvgAttr:!0},"font-style":{type:"opt",optionList:["normal","italic"],value:0,isSvgAttr:!0}},Tick:{},Grid:{id:"yAxis-grid-line",switch:{type:"check",value:!1,isFresh:!0},stroke:{type:"color",value:"#000000",isSvgAttr:!0},"stroke-width":{type:"seq",value:1,isSvgAttr:!0,scaleStep:1,min:0,max:1/0},"stroke-opacity":{type:"seq",value:.1,isSvgAttr:!0,scaleStep:.01,min:0,max:1}}},this.figureData.background={Background:{id:"background-rect-style",switch:{type:"check",value:!1,isFresh:!0},fill:{type:"color",value:"#eaeaf1",isSvgAttr:!0},"fill-opacity":{type:"seq",value:1,isSvgAttr:!0,scaleStep:.01,min:0,max:1}}}}init(){super.init(),this.polarGroup=this.maingroup.append("g").attr("transform",`translate(${this.innerwidth/2},${this.innerHeight/2})`)}getMaxMinValue(i){console.log(i);let s=[];return i.columns.slice(1).forEach((e,t)=>{var a=d3.extent(i,t=>t[e]);s=s.concat(a)}),this.mmv=[Math.min(...s),Math.max(...s)]}addAxis(){this.figureData.background.Background.switch.value&&this.polarGroup.append("circle").attr("r",this.outerRadius).attr("class",this.figureData.background.Background.id).call(t=>{this.renderAttr(t,this.figureData.background.Background)});const t=this.figureData.yAxis.Tick;let e=this.yScale.ticks().slice(1);t.hasOwnProperty("tickValues")&&t.tickValues.value&&(e=t.tickValues.value.split(","));this.polarGroup.append("g").call(t=>t.call(t=>t.selectAll("g").data(this.xScale.domain()).enter().append("g").attr("transform",t=>`
          rotate(${180*(this.xScale(t)+this.xScale.bandwidth()/2)/Math.PI-90})
          translate(${this.outerRadius+this.figureData.xAxis["Text style"].y.value},0)
        `).call(t=>{t.append("text").attr("class",this.figureData.xAxis["Text style"].id).attr("transform",t=>(this.xScale(t)+this.xScale.bandwidth()/2+Math.PI/2)%(2*Math.PI)<Math.PI?"rotate(90) translate(0,16)":"rotate(-90) translate(0,-9)").text(t=>t).call(t=>{this.renderAttr(t,this.figureData.xAxis["Text style"])})})).call(t=>{this.figureData.xAxis.Grid.switch.value&&t.selectAll("gridG").data(this.xScale.domain()).enter().append("g").attr("transform",t=>`
          rotate(${180*(this.xScale(t)+this.xScale.bandwidth()/2)/Math.PI-90})
          translate(0,0)`).call(t=>t.append("line").attr("x2",this.outerRadius).attr("x1",this.innerRadius).attr("class",this.figureData.xAxis.Grid.id).call(t=>this.renderAttr(t,this.figureData.xAxis.Grid)))})).attr("id","yAxis"),this.polarGroup.append("g").call(t=>t.call(t=>t.append("text").attr("x",-6).attr("y",t=>-this.yScale(this.yScale.ticks().pop())).attr("dy","-1em").text("")).call(t=>{t.selectAll("circleG").data(e).join("g").attr("transform",t=>`rotate(${this.figureData.yAxis["Text style"].rotate.value})`).call(t=>{let e=this.figureData.yAxis.Grid;e.switch.value&&t.append("circle").attr("r",this.yScale).attr("fill","none").attr("class",e.id).call(t=>this.renderAttr(t,e)),t.append("text").attr("y",t=>-this.yScale(t)).attr("dy","0.35em").attr("class",this.figureData.yAxis["Text style"].id).text(t=>t).call(t=>{this.renderAttr(t,this.figureData.yAxis["Text style"])})})})).attr("id","yAxis")}}export{PolarPlot};